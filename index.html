<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>Frontend Mentor | Tip calculator app</title>


  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./index.css">
</head>

<body>

  <h1 id="title">SPLI<br />TTER</h1>



  <div class="mainBody">
    <form class="" id="calcForm" name="calcdata" method="get" onsubmit="" onchange="formChange()">
      <div class="container">

        <div class="row">
          <div class="col billInput" id="bill">
            <h7>Bill Amount</h7>
            <input type="number" id="amountInput" name="calcdata" value=""><br>
          </div>
        </div>
        <h7>Select tip %</h7>

        <div class="row">
          <div class="col-6 col-lg-4">
            <li>
              <input type="radio" id="5" class="formradio" name="calcperc" value=1.05 onclick="setAmount()"></input>
              <label class="formlabel" for="">5%</label>
            </li>
          </div>
          <div class="col-6 col-lg-4">
            <li>
              <input type="radio" id="10" class="formradio" name="calcperc" value=1.1 onclick="setAmount()"></input>
              <label class="formlabel" for="">10%</label>
            </li>
          </div>
          <div class="col-6 col-lg-4">
            <li>
              <input type="radio" id="15" class="formradio" name="calcperc" value=1.15 onclick="setAmount()"></input>
              <label class="formlabel" for="">15%</label>
            </li>
          </div>
          <div class="col-6 col-lg-4">
            <li>
              <input type="radio" id="25" class="formradio" name="calcperc" value=1.25 onclick="setAmount()"></input>
              <label class="formlabel" for="">25%</label>
            </li>
          </div>
          <div class="col-6 col-lg-4">
            <li>
              <input type="radio" id="50" class="formradio" name="calcperc" value=1.50 onclick="setAmount()"></input>
              <label class="formlabel" for="">50%</label>
            </li>
          </div>
          <div class="col-6 col-lg-4">
            <li class="customSpace">
              <input type="radio" class="formradio custom" name="calcperc" id="other-amount" value="other" onClick="otherAmount()">
              <input type="number" name="calccust" class="custom" value="" id="other-text" placeholder="Custom %">
            </li>
          </div>
        </div>
        <div class="billInput" id="people">

                  <h7>Number of people</h7>
                  <input type="number" id="numpers" name="calcpeople" class="" value=""><br>
                  <input type="submit" name="calcsubmit" id="reset" value="Reset">
        </div>
      </div>

    </form>
    <div class="" id="results">
      <div class="resultContainer">
        <div class="totalTitle">
          <h7>
            Tip amount
          </h7> <br>
          / Person
        </div>
        <p class="resultFigure" id="tipPerPers">$</p>
      </div>
      <div class="resultContainer">
        <div class="totalTitle">
          <h7>
          Total payment
          </h7> <br>
          / Person
        </div>
        <p class="resultFigure" id="totPerPers">$</p>
      </div>

    </div>
  </div>


</body>

<script type="text/javascript">

  document.getElementById("other-text").placeholder = "Custom %";
  var form = document.getElementById("calcForm");

  function formChange(e) {
    console.log("hello")
    var bill = document.forms["calcdata"]["calcdata"].value;
    var tip = document.forms["calcdata"]["calcperc"].value;
    var custom = document.forms["calcdata"]["calccust"].value;
    var people = document.forms["calcdata"]["calcpeople"].value;
    var tipAmount = ((bill * tip)-bill);
    var result = document.getElementById("totPerPers");
    console.log(Number.isFinite(tipAmount/people));
    // custom != '' ? result.innerHTML = (Math.ceil(bill * (1 + (custom / 100)))/people) : result.innerHTML = (Math.ceil(bill * tip)/people);
    if(custom!=''){
      Number.isFinite((Math.ceil(bill * (1 + (custom / 100)))/people)).toFixed(2) ? result.innerHTML = '$' + (Math.ceil(bill * (1 + (custom / 100)))/people).toFixed(2) : result.innerHTML = ''
    } else {
      Number.isFinite((Math.ceil(bill * tip)/people)) ? result.innerHTML = '$' + (Math.ceil(bill * tip)/people).toFixed(2) : result.innerHTML = ''
    };
    Number.isFinite(tipAmount/people) ? document.getElementById("tipPerPers").innerHTML = '$' + (Math.floor(tipAmount)/people).toFixed(2) : document.getElementById("tipPerPers").innerHTML = '';


  }

  // function formSubmit(e) {
  //   e.preventDefault();
  //   var bill = document.forms["calcdata"]["calcdata"].value;
  //   var tip = document.forms["calcdata"]["calcperc"].value;
  //   var custom = document.forms["calcdata"]["calccust"].value;
  //   var people = document.forms["calcdata"]["calcpeople"].value
  //   custom != '' ? console.log(Math.ceil(bill * (1 + (custom / 100)))/people) : console.log(Math.ceil(bill * tip)/people)
  // }

  function otherAmount() {
    a = document.getElementById('other-amount');
    a.checked = true;
    document.getElementById('other-text').focus();
  }

  function setAmount() {
    a = document.getElementById('other-text');
    a.value = "";
  }

  // form.addEventListener('submit', formSubmit);
</script>

</html>
